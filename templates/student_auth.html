<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | {{ class_name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="main-container center-view">
        <div class="auth-card fade-in">
            <div class="brand-header">
                <h1>{{ class_name }}</h1>
                <p>Digital Attendance Portal</p>
            </div>

            <div id="msg" class="message"></div>

            {% if is_admin %}
            <form action="/login" method="POST">
                <div class="input-group">
                    <label>Controller ID</label>
                    <input type="text" name="username" placeholder="Username" required>
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" name="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" required>
                </div>
                <button type="submit" class="btn-primary">Controller Access</button>
            </form>
            {% else %}
            <div id="login-form">
                <form onsubmit="auth(event, 'login')">
                    <div class="input-group">
                        <label>Enrollment Number</label>
                        <input type="text" name="enrollment" placeholder="Y24..." required autocomplete="off">
                    </div>
                    <div class="input-group">
                        <label>Password</label>
                        <input type="password" name="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                    <button type="submit" class="btn-primary">Secure Login</button>
                </form>
                <p class="switch-text" style="margin-top:15px; font-size:0.9rem; color:#94a3b8;">
                    New device? <a onclick="toggle()" style="color:#6366f1; cursor:pointer; text-decoration:underline;">Register here</a>
                </p>
            </div>

            <div id="register-form" class="hidden">
                <div class="info-badge" style="background:rgba(99,102,241,0.1); color:#818cf8; padding:8px; border-radius:8px; margin-bottom:15px; font-size:0.85rem;">
                    <span>ðŸ”’ Device will be linked permanently.</span>
                </div>
                <form onsubmit="auth(event, 'register')">
                    <div class="input-group">
                        <label>Enrollment Number</label>
                        <input type="text" name="enrollment" placeholder="Y24..." required>
                    </div>
                    <div class="input-group">
                        <label>Create Password</label>
                        <input type="password" name="password" placeholder="New Password" required>
                    </div>
                    <button type="submit" class="btn-accent" style="border:1px solid #6366f1; color:#6366f1; background:transparent;">Register Device</button>
                </form>
                <p class="switch-text" style="margin-top:15px; font-size:0.9rem; color:#94a3b8;">
                    Have an account? <a onclick="toggle()" style="color:#6366f1; cursor:pointer; text-decoration:underline;">Login</a>
                </p>
            </div>
            {% endif %}
        </div>
        
        <footer class="ritik-footer">
            <p>Crafted by <span>à¤‹à¤¤à¤¿à¤•</span></p>
        </footer>

        <a href="https://wa.me/918986937029?text=Hi,%20I%20have%20a%20technical%20issue%20with%20the%20attendance%20portal." target="_blank" class="btn-whatsapp">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.3 20.62C8.75 21.41 10.38 21.83 12.04 21.83C17.5 21.83 21.95 17.38 21.95 11.92C21.95 9.27 20.92 6.78 19.05 4.91C17.18 3.03 14.69 2 12.04 2ZM12.05 20.15C10.56 20.15 9.11 19.76 7.85 19L7.55 18.83L4.43 19.65L5.26 16.61L5.06 16.29C4.24 15 3.8 13.47 3.8 11.91C3.8 7.37 7.5 3.67 12.05 3.67C14.25 3.67 16.31 4.53 17.87 6.09C19.42 7.65 20.28 9.71 20.28 11.91C20.28 16.46 16.58 20.15 12.05 20.15Z"/></svg>
            Issue Resolution
        </a>
    </div>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>